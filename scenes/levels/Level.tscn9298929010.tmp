[gd_scene load_steps=23 format=4 uid="uid://b4q1g52ororqg"]

[ext_resource type="Texture2D" uid="uid://c1hsqg5ecxbgk" path="res://assets/sprites/backgroundColorGrass.png" id="1_1nx8s"]
[ext_resource type="Script" uid="uid://f1esx76f6b8y" path="res://scripts/LEVEL_GLOBAL_SETTER.gd" id="1_h4kvy"]
[ext_resource type="Script" uid="uid://d0wyqc1nxa67u" path="res://scripts/GameManager.gd" id="2_h4kvy"]
[ext_resource type="Script" uid="uid://r5r5h0amotv5" path="res://scripts/WaveManager.gd" id="3_k8xa7"]
[ext_resource type="PackedScene" uid="uid://cscbj1701v25s" path="res://scenes/enemies/basic_enemy.tscn" id="4_qx4j1"]
[ext_resource type="Script" uid="uid://dbubllyh3rclm" path="res://scripts/ui.gd" id="5_0pstx"]
[ext_resource type="PackedScene" uid="uid://gxn5v5xj5kbv" path="res://scenes/towers/basic_tower.tscn" id="6_amaq8"]
[ext_resource type="FontFile" uid="uid://cupuer6eed3y4" path="res://assets/fonts/Kenney Future Narrow.ttf" id="7_a3u51"]
[ext_resource type="Texture2D" uid="uid://b2k2h2oxfbxej" path="res://assets/sprites/ui-yellow/Default/button_rectangle_depth_gradient.png" id="8_5rk4o"]
[ext_resource type="PackedScene" uid="uid://qdyeb7fj4s6m" path="res://scenes/towers/TowerZone.tscn" id="9_xa47j"]
[ext_resource type="Texture2D" uid="uid://df5qkoirb8jtc" path="res://assets/sprites/Character/FCP#FREE_2_Silver.png" id="10_0pstx"]
[ext_resource type="PackedScene" uid="uid://dhou2tshc5k4j" path="res://scenes/towers/isometric_tower.tscn" id="10_ekbd4"]
[ext_resource type="Texture2D" uid="uid://coepreqnikvyq" path="res://assets/sprites/Character/FCP#FREE_2_Gold.png" id="10_qx4j1"]
[ext_resource type="Texture2D" uid="uid://du0ehv4ljjbkg" path="res://tileset_atlas.png" id="11_uhid2"]
[ext_resource type="Texture2D" uid="uid://crnrr1v6aixme" path="res://details_atlas.png" id="12_jf8hv"]
[ext_resource type="PackedScene" uid="uid://tu21sirfq047" path="res://scenes/ui/pause_screen.tscn" id="14_0pstx"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ig7tw"]
vertices = PackedVector2Array(-7994.84, -2161.44, -7974.82, -2156.63, -8796.97, -1741.17, -8878.26, -1732.91, -7733.81, -2098.21, -7715.08, -2084.54, -8267, -1805.15, -8292.58, -1799.11, -8267, -1792.86, -7821.08, -1553.1, -7817.28, -1564.96, -8797.03, -1728.94, -8116.69, -1356.49, -8117.84, -1376.65, -8028.8, -1413.81, -7820.93, -1541.15, -7753.64, -1536.92)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7), PackedInt32Array(7, 6, 8), PackedInt32Array(9, 7, 8, 10), PackedInt32Array(3, 2, 11), PackedInt32Array(12, 3, 11, 13), PackedInt32Array(14, 12, 13), PackedInt32Array(14, 13, 15, 16), PackedInt32Array(10, 16, 15, 9)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-7996, -2172, -7946, -2160, -8787, -1735, -8118, -1388, -7831, -1547, -8314, -1799, -7733, -2110, -7696, -2083, -8257, -1799, -7813, -1574, -7729, -1537, -8024, -1405, -8116, -1345, -8901, -1733)])

[sub_resource type="Theme" id="Theme_ycdy4"]
default_font = ExtResource("7_a3u51")

[sub_resource type="Theme" id="Theme_dg77c"]
default_font = ExtResource("7_a3u51")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_w48qg"]
texture = ExtResource("11_uhid2")
texture_region_size = Vector2i(132, 99)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
2:3/0 = 0
3:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
0:8/0 = 0
1:8/0 = 0
2:8/0 = 0
3:8/0 = 0
0:9/0 = 0
1:9/0 = 0
1:3/0 = 0
0:3/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_4c57u"]
texture = ExtResource("12_jf8hv")
margins = Vector2i(0, 12)
texture_region_size = Vector2i(128, 64)
0:0/0 = 0
0:1/0 = 0
0:2/0 = 0
0:3/0 = 0
0:4/0 = 0
0:5/0 = 0
0:6/0 = 0
0:7/0 = 0
0:8/0 = 0
0:9/0 = 0
0:10/0 = 0
0:11/0 = 0
0:12/0 = 0
0:13/0 = 0
0:14/0 = 0
0:15/0 = 0

[sub_resource type="TileSet" id="TileSet_4c57u"]
tile_shape = 1
tile_layout = 5
tile_size = Vector2i(128, 64)
sources/122 = SubResource("TileSetAtlasSource_w48qg")
sources/143 = SubResource("TileSetAtlasSource_4c57u")
tile_proxies/coords_level = [[0, Vector2i(0, 0)], [40, Vector2i(0, 0)], [1, Vector2i(0, 0)], [40, Vector2i(1, 0)], [2, Vector2i(0, 0)], [40, Vector2i(2, 0)], [3, Vector2i(0, 0)], [40, Vector2i(3, 0)], [4, Vector2i(0, 0)], [40, Vector2i(4, 0)], [5, Vector2i(0, 0)], [40, Vector2i(5, 0)], [6, Vector2i(0, 0)], [40, Vector2i(6, 0)], [7, Vector2i(0, 0)], [40, Vector2i(7, 0)], [8, Vector2i(0, 0)], [40, Vector2i(8, 0)], [9, Vector2i(0, 0)], [40, Vector2i(9, 0)], [10, Vector2i(0, 0)], [40, Vector2i(10, 0)], [11, Vector2i(0, 0)], [40, Vector2i(11, 0)], [12, Vector2i(0, 0)], [40, Vector2i(12, 0)], [13, Vector2i(0, 0)], [40, Vector2i(13, 0)], [14, Vector2i(0, 0)], [40, Vector2i(14, 0)], [15, Vector2i(0, 0)], [40, Vector2i(15, 0)], [16, Vector2i(0, 0)], [40, Vector2i(16, 0)], [17, Vector2i(0, 0)], [40, Vector2i(17, 0)], [18, Vector2i(0, 0)], [40, Vector2i(18, 0)], [19, Vector2i(0, 0)], [40, Vector2i(19, 0)], [20, Vector2i(0, 0)], [40, Vector2i(20, 0)], [21, Vector2i(0, 0)], [40, Vector2i(21, 0)], [22, Vector2i(0, 0)], [40, Vector2i(22, 0)], [23, Vector2i(0, 0)], [40, Vector2i(23, 0)], [24, Vector2i(0, 0)], [40, Vector2i(24, 0)], [25, Vector2i(0, 0)], [40, Vector2i(25, 0)], [26, Vector2i(0, 0)], [40, Vector2i(26, 0)], [27, Vector2i(0, 0)], [40, Vector2i(27, 0)], [28, Vector2i(0, 0)], [40, Vector2i(28, 0)], [29, Vector2i(0, 0)], [40, Vector2i(29, 0)], [30, Vector2i(0, 0)], [40, Vector2i(0, 1)], [31, Vector2i(0, 0)], [40, Vector2i(1, 1)], [32, Vector2i(0, 0)], [40, Vector2i(2, 1)], [33, Vector2i(0, 0)], [40, Vector2i(3, 1)], [34, Vector2i(0, 0)], [40, Vector2i(4, 1)], [35, Vector2i(0, 0)], [40, Vector2i(5, 1)], [36, Vector2i(0, 0)], [40, Vector2i(6, 1)], [37, Vector2i(0, 0)], [40, Vector2i(7, 1)], [38, Vector2i(0, 0)], [40, Vector2i(8, 1)], [39, Vector2i(0, 0)], [40, Vector2i(9, 1)], [41, Vector2i(0, 0)], [81, Vector2i(0, 0)], [42, Vector2i(0, 0)], [81, Vector2i(1, 0)], [43, Vector2i(0, 0)], [81, Vector2i(2, 0)], [44, Vector2i(0, 0)], [81, Vector2i(3, 0)], [45, Vector2i(0, 0)], [81, Vector2i(4, 0)], [46, Vector2i(0, 0)], [81, Vector2i(5, 0)], [47, Vector2i(0, 0)], [81, Vector2i(6, 0)], [48, Vector2i(0, 0)], [81, Vector2i(7, 0)], [49, Vector2i(0, 0)], [81, Vector2i(8, 0)], [50, Vector2i(0, 0)], [81, Vector2i(9, 0)], [51, Vector2i(0, 0)], [81, Vector2i(10, 0)], [52, Vector2i(0, 0)], [81, Vector2i(11, 0)], [53, Vector2i(0, 0)], [81, Vector2i(12, 0)], [54, Vector2i(0, 0)], [81, Vector2i(13, 0)], [55, Vector2i(0, 0)], [81, Vector2i(14, 0)], [56, Vector2i(0, 0)], [81, Vector2i(15, 0)], [57, Vector2i(0, 0)], [81, Vector2i(16, 0)], [59, Vector2i(0, 0)], [81, Vector2i(17, 0)], [60, Vector2i(0, 0)], [81, Vector2i(18, 0)], [61, Vector2i(0, 0)], [81, Vector2i(19, 0)], [63, Vector2i(0, 0)], [81, Vector2i(20, 0)], [64, Vector2i(0, 0)], [81, Vector2i(21, 0)], [65, Vector2i(0, 0)], [81, Vector2i(22, 0)], [66, Vector2i(0, 0)], [81, Vector2i(23, 0)], [67, Vector2i(0, 0)], [81, Vector2i(24, 0)], [68, Vector2i(0, 0)], [81, Vector2i(25, 0)], [69, Vector2i(0, 0)], [81, Vector2i(26, 0)], [70, Vector2i(0, 0)], [81, Vector2i(27, 0)], [71, Vector2i(0, 0)], [81, Vector2i(28, 0)], [72, Vector2i(0, 0)], [81, Vector2i(29, 0)], [73, Vector2i(0, 0)], [81, Vector2i(0, 1)], [74, Vector2i(0, 0)], [81, Vector2i(1, 1)], [75, Vector2i(0, 0)], [81, Vector2i(2, 1)], [76, Vector2i(0, 0)], [81, Vector2i(3, 1)], [77, Vector2i(0, 0)], [81, Vector2i(4, 1)], [78, Vector2i(0, 0)], [81, Vector2i(5, 1)], [79, Vector2i(0, 0)], [81, Vector2i(6, 1)], [80, Vector2i(0, 0)], [81, Vector2i(7, 1)], [82, Vector2i(0, 0)], [122, Vector2i(0, 0)], [83, Vector2i(0, 0)], [122, Vector2i(1, 0)], [84, Vector2i(0, 0)], [122, Vector2i(2, 0)], [85, Vector2i(0, 0)], [122, Vector2i(3, 0)], [86, Vector2i(0, 0)], [122, Vector2i(0, 1)], [87, Vector2i(0, 0)], [122, Vector2i(1, 1)], [88, Vector2i(0, 0)], [122, Vector2i(2, 1)], [89, Vector2i(0, 0)], [122, Vector2i(3, 1)], [90, Vector2i(0, 0)], [122, Vector2i(0, 2)], [91, Vector2i(0, 0)], [122, Vector2i(1, 2)], [92, Vector2i(0, 0)], [122, Vector2i(2, 2)], [93, Vector2i(0, 0)], [122, Vector2i(3, 2)], [94, Vector2i(0, 0)], [122, Vector2i(0, 3)], [95, Vector2i(0, 0)], [122, Vector2i(1, 3)], [96, Vector2i(0, 0)], [122, Vector2i(2, 3)], [97, Vector2i(0, 0)], [122, Vector2i(3, 3)], [98, Vector2i(0, 0)], [122, Vector2i(0, 4)], [100, Vector2i(0, 0)], [122, Vector2i(1, 4)], [101, Vector2i(0, 0)], [122, Vector2i(2, 4)], [102, Vector2i(0, 0)], [122, Vector2i(3, 4)], [104, Vector2i(0, 0)], [122, Vector2i(0, 5)], [105, Vector2i(0, 0)], [122, Vector2i(1, 5)], [106, Vector2i(0, 0)], [122, Vector2i(2, 5)], [107, Vector2i(0, 0)], [122, Vector2i(3, 5)], [108, Vector2i(0, 0)], [122, Vector2i(0, 6)], [109, Vector2i(0, 0)], [122, Vector2i(1, 6)], [110, Vector2i(0, 0)], [122, Vector2i(2, 6)], [111, Vector2i(0, 0)], [122, Vector2i(3, 6)], [112, Vector2i(0, 0)], [122, Vector2i(0, 7)], [113, Vector2i(0, 0)], [122, Vector2i(1, 7)], [114, Vector2i(0, 0)], [122, Vector2i(2, 7)], [115, Vector2i(0, 0)], [122, Vector2i(3, 7)], [116, Vector2i(0, 0)], [122, Vector2i(0, 8)], [117, Vector2i(0, 0)], [122, Vector2i(1, 8)], [118, Vector2i(0, 0)], [122, Vector2i(2, 8)], [119, Vector2i(0, 0)], [122, Vector2i(3, 8)], [120, Vector2i(0, 0)], [122, Vector2i(0, 9)], [121, Vector2i(0, 0)], [122, Vector2i(1, 9)], [126, Vector2i(0, 0)], [143, Vector2i(0, 0)], [128, Vector2i(0, 0)], [143, Vector2i(0, 1)], [129, Vector2i(0, 0)], [143, Vector2i(0, 2)], [130, Vector2i(0, 0)], [143, Vector2i(0, 3)], [131, Vector2i(0, 0)], [143, Vector2i(0, 4)], [132, Vector2i(0, 0)], [143, Vector2i(0, 5)], [133, Vector2i(0, 0)], [143, Vector2i(0, 6)], [134, Vector2i(0, 0)], [143, Vector2i(0, 7)], [135, Vector2i(0, 0)], [143, Vector2i(0, 8)], [136, Vector2i(0, 0)], [143, Vector2i(0, 9)], [137, Vector2i(0, 0)], [143, Vector2i(0, 10)], [138, Vector2i(0, 0)], [143, Vector2i(0, 11)], [139, Vector2i(0, 0)], [143, Vector2i(0, 12)], [139, Vector2i(0, 1)], [143, Vector2i(0, 13)], [140, Vector2i(0, 0)], [143, Vector2i(0, 14)], [141, Vector2i(0, 0)], [143, Vector2i(0, 15)]]

[node name="Main" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_h4kvy")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -1

[node name="TextureRect" type="TextureRect" parent="CanvasLayer"]
offset_left = -12.0
offset_top = -14.0
offset_right = 1286.0
offset_bottom = 1045.0
texture = ExtResource("1_1nx8s")

[node name="GameManager" type="Node2D" parent="." node_paths=PackedStringArray("health_label", "money_label", "wave_label")]
position = Vector2(37, 42)
script = ExtResource("2_h4kvy")
health_label = NodePath("../UI/HUD/BottomBar/HealthLabel")
money_label = NodePath("../UI/HUD/BottomBar/MoneyLabel")
wave_label = NodePath("../UI/HUD/BottomBar/WaveLabel")

[node name="TargetPoint" type="Marker2D" parent="GameManager"]
position = Vector2(1302.57, -32.2064)

[node name="SpawnPoint" type="Marker2D" parent="GameManager"]
position = Vector2(1029.84, -95.8427)

[node name="WaveManager" type="Node2D" parent="GameManager" node_paths=PackedStringArray("spawn_point", "target_point")]
script = ExtResource("3_k8xa7")
enemy_scene = ExtResource("4_qx4j1")
spawn_point = NodePath("../SpawnPoint")
target_point = NodePath("../TargetPoint")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(9072, 2092)
navigation_polygon = SubResource("NavigationPolygon_ig7tw")

[node name="UI" type="CanvasLayer" parent="." node_paths=PackedStringArray("portrait_button", "portrait_menu")]
script = ExtResource("5_0pstx")
tower_scene = ExtResource("6_amaq8")
portrait_button = NodePath("Portrait")
portrait_menu = NodePath("../PauseScreen")

[node name="HUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -10.0
offset_top = 1.0
offset_right = -10.0
offset_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme = SubResource("Theme_ycdy4")
metadata/_edit_lock_ = true

[node name="GemsLabel" type="Label" parent="UI/HUD"]
layout_mode = 2
offset_left = 188.824
offset_top = 73.0157
offset_right = 222.824
offset_bottom = 91.0157
theme_override_colors/font_color = Color(0.831373, 0.67451, 0.0196078, 1)
text = "000"

[node name="BottomBar" type="HBoxContainer" parent="UI/HUD"]
layout_mode = 0
offset_left = 20.0
offset_top = 649.0
offset_right = 1289.0
offset_bottom = 721.0
mouse_filter = 2
theme = SubResource("Theme_dg77c")

[node name="PlaceTowerButton" type="Button" parent="UI/HUD/BottomBar"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_colors/font_focus_color = Color(0.639216, 0, 0, 1)
theme_override_font_sizes/font_size = 16
text = "PLACE TOWER"
icon = ExtResource("8_5rk4o")
flat = true
icon_alignment = 1

[node name="MoneyLabel" type="Label" parent="UI/HUD/BottomBar"]
layout_mode = 2
text = "Money: 500"

[node name="HealthLabel" type="Label" parent="UI/HUD/BottomBar"]
layout_mode = 2
text = "Health: 100"

[node name="WaveLabel" type="Label" parent="UI/HUD/BottomBar"]
layout_mode = 2
text = "Wave: 1"

[node name="Portrait" type="TextureButton" parent="UI"]
offset_left = 17.0
offset_top = 13.0
offset_right = 157.0
offset_bottom = 158.0
toggle_mode = true
texture_normal = ExtResource("10_qx4j1")
texture_pressed = ExtResource("10_qx4j1")
texture_hover = ExtResource("10_qx4j1")
texture_disabled = ExtResource("10_qx4j1")
texture_focused = ExtResource("10_0pstx")
ignore_texture_size = true
stretch_mode = 4

[node name="TowerPlacementManager" type="Node2D" parent="."]

[node name="PlacementSpot" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(308, 398)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot5" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(697, 215)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot6" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(1157, 512)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot7" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(952, 591)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot2" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(761, 511)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot3" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(563, 211)
tower_scene = ExtResource("10_ekbd4")

[node name="PlacementSpot4" parent="TowerPlacementManager" instance=ExtResource("9_xa47j")]
position = Vector2(374, 177)
tower_scene = ExtResource("10_ekbd4")

[node name="Towers" type="Node2D" parent="." groups=["towers_container"]]
z_index = 3

[node name="Enemies" type="Node2D" parent="." groups=["enemies_container"]]
y_sort_enabled = true

[node name="Projectiles" type="Node2D" parent="." groups=["projectiles_container"]]
z_index = 2
y_sort_enabled = true

[node name="GroundLayer" type="TileMapLayer" parent="."]
position = Vector2(54, 29)
tile_map_data = PackedByteArray("AAAGABkAegADAAgAAAAGABgAegADAAgAAAAFABcAegADAAgAAAAFABYAegADAAgAAAAEABUAegADAAgAAAAEABQAegADAAgAAAADABMAegADAAgAAAADABIAegADAAgAAAACABAAegADAAgAAAACABEAegADAAgAAAABAA8AegADAAgAAAABAA4AegADAAgAAAAAAA0AegADAAgAAAAAAAwAegADAAgAAAD//wsAegADAAgAAAD//woAegADAAgAAAAPAAQAegACAAcAAAAOAAQAegACAAcAAAANAAQAegACAAcAAAAMAAQAegACAAcAAAAMAAUAegADAAgAAAALAAUAegADAAgAAAALAAQAegACAAcAAAAKAAQAegACAAcAAAAKAAUAegACAAgAAAAJAAQAegACAAcAAAAIAAQAegACAAcAAAAHAAQAegACAAcAAAAGAAQAegACAAAAAAAGAAMAegACAAEAAAAGAAIAegACAAEAAAAGAAEAegACAAEAAAAHAAMAegAAAAIAAAAHAAIAegAAAAIAAAAHAAEAegAAAAIAAAAGAAAAegADAAYAAAAGAP//egADAAYAAAAGAP7/egADAAYAAAAGAP3/egADAAYAAAAGAPz/egADAAYAAAAGAPv/egADAAYAAAAGAPr/egADAAYAAAAGAPn/egADAAYAAAAGAPj/egADAAYAAAAGAPf/egADAAYAAAAGAPb/egADAAYAAAAGAPX/egADAAYAAAAQAAQAegACAAcAAAAFAAEAegABAAMAAAAIAAUAegABAAMAAAANAAMAegABAAMAAAARAAQAegADAAEAAAARAAMAegABAAIAAAARAAIAegADAAYAAAARAAEAegADAAYAAAARAAAAegADAAYAAAARAP//egADAAAAAAAQAP//egACAAcAAAAPAP//egACAAcAAAAOAP//egACAAcAAAANAP//egACAAcAAAAMAP//egACAAcAAAALAP//egACAAcAAAAKAP//egACAAcAAAAJAP//egACAAAAAAAJAP7/egADAAYAAAAJAP3/egADAAYAAAAJAPz/egADAAYAAAAJAPv/egADAAYAAAAJAPr/egADAAYAAAAJAPn/egADAAYAAAAJAPj/egADAAYAAAAJAPb/egADAAYAAAAQAAAAegABAAMAAAAHAAAAegABAAMAAAAIAP//egABAAMAAAAQAAMAegABAAMAAAAKAAYAegAAAAAAAAALAAYAegADAAgAAAAMAAYAegADAAgAAAANAAYAegABAAEAAAANAAUAegABAAAAAAAJAPf/egADAAYAAAA=")
tile_set = SubResource("TileSet_4c57u")

[node name="PauseScreen" parent="." instance=ExtResource("14_0pstx")]
visible = false

[connection signal="pressed" from="UI/Portrait" to="UI" method="_on_portrait_pressed"]
